---
name: commit
description: Conventional Commits形式でgitコミットを作成。ユーザーがコミットを依頼した際、または`/commit`コマンドが呼ばれた際に使用。コミットメッセージは英語typeプレフィックス + 日本語の説明で構成。
---

# Commit

Conventional Commits形式に基づくコミットメッセージを作成する。

## コミットメッセージ形式

```
<type>: <subject>

<body>
```

- **type**: 英語プレフィックス（必須）
- **subject**: 日本語で簡潔に（必須、50文字以内、文末に句点なし）
- **body**: 日本語で補足説明（任意・簡潔に）

## Type一覧

| Type | 説明 |
|------|------|
| `feat` | 新機能の追加 |
| `fix` | バグ修正 |
| `docs` | ドキュメントのみの変更 |
| `style` | コードの意味に影響しない変更（空白、フォーマット等） |
| `refactor` | バグ修正や機能追加ではないコード変更 |
| `perf` | パフォーマンス改善 |
| `test` | テストの追加・修正 |
| `build` | ビルドシステムや外部依存に関する変更 |
| `ci` | CI設定ファイルやスクリプトの変更 |
| `chore` | その他の変更（ソースやテストの変更を含まない） |
| `revert` | 以前のコミットの取り消し |

## 例

```bash
feat: ユーザー認証機能を追加

fix: ログイン時のnullポインタ例外を修正

fix: セッションタイムアウトを修正

トークン更新処理が正しく動作していなかった

refactor: データベース接続処理を共通化

docs: APIリファレンスを更新

test: ユーザーサービスのテストを追加
```

## コミット手順

1. `git status`で変更ファイルを確認
2. `git diff`でstaged/unstaged変更を確認
3. `git log`で直近のコミットスタイルを確認
4. 変更内容を分析し、適切なtypeを選択
5. 日本語でsubjectを作成（「〜する」「〜を追加」形式）
6. HEREDOCでコミット実行：
   ```bash
   git commit -m "$(cat <<'EOF'
   type: subject
   EOF
   )"
   ```

## 注意事項

- 1コミット = 1つの論理的な変更
- .env等の機密ファイルはコミットしない
- WIPコミットは避ける
- `git commit --amend`は直前の自分のコミットかつ未pushの場合のみ使用
